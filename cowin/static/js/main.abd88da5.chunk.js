(this["webpackJsonpcowin-vaccine"]=this["webpackJsonpcowin-vaccine"]||[]).push([[0],{18:function(e,t,n){var c=n(43).create({baseURL:"https://cdn-api.co-vin.in/api/v2"});e.exports=c},69:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(34),r=n.n(a),i=n(21),l=n(3),o=n(10),d=n.n(o),u=n(37),j=n(11),p=n(16),b=n(5),h=n(18),f=n.n(h),O=n(13),x=n.n(O),m=n(36),v=n(0),g=["Age 18+","Age 45+","COVISHIELD","COVAXIN","Free","Paid"];function y(e){var t=e.handleFilterChange,n=e.propfilters,c=void 0===n?[]:n,a=s.a.useState(c),r=Object(b.a)(a,2),i=r[0],l=r[1];return Object(v.jsx)("div",{className:"row",style:{marginTop:"20px"},children:Object(v.jsx)("div",{className:"col-sm-offset-3 col-sm-6 col-xs-12",children:g.map((function(e){return Object(v.jsx)("input",{value:e,type:"button",style:{margin:"5px",outlineStyle:"none"},className:"btn "+(i.includes(e)?"btn-info":"btn-default"),onClick:function(n){n.preventDefault(),function(e){var n=i.indexOf(e),c=Object(j.a)(i);n>-1?c.splice(n,1):c.push(e),l(c),t(c)}(e)}})}))})})}n(68);var S=document.getElementById("root");r.a.render(Object(v.jsx)(c.StrictMode,{children:Object(v.jsx)("div",{className:"container",style:{marginTop:"30px"},children:Object(v.jsx)(i.a,{children:Object(v.jsx)(l.a,{path:"/",component:function(){var e=Object(l.e)(),t=new URLSearchParams(Object(l.f)().search),n=s.a.useState([]),c=Object(b.a)(n,2),a=c[0],r=c[1],i=s.a.useState(t.get("filters")?window.decodeURIComponent(t.get("filters")).split(","):[]),o=Object(b.a)(i,2),h=o[0],O=o[1],g=s.a.useState([]),S=Object(b.a)(g,2),N=S[0],C=S[1],D=s.a.useState([]),k=Object(b.a)(D,2),w=k[0],_=k[1],Y=s.a.useState([]),I=Object(b.a)(Y,2),A=I[0],M=I[1],E=s.a.useState(t.get("state")),P=Object(b.a)(E,2),V=P[0],B=P[1],L=s.a.useState(t.get("district")),F=Object(b.a)(L,2),H=F[0],R=F[1],T=s.a.useState(t.get("pincode")),U=Object(b.a)(T,2),X=U[0],J=U[1],W=s.a.useState(t.get("searchBy")||"pincode"),q=Object(b.a)(W,2),z=q[0],G=q[1],K=s.a.useState(x()().format("YYYY-MM-DD")),Q=Object(b.a)(K,2),Z=Q[0],$=Q[1],ee=s.a.useState(!1),te=Object(b.a)(ee,2),ne=te[0],ce=te[1];function se(){return(se=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/admin/location/states");case 3:t=e.sent,console.log("res",t),r(t.data.states||[]),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ae(){return(ae=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/admin/location/districts/".concat(V));case 3:t=e.sent,console.log("res",t),C(t.data.districts||[]),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function re(){return ie.apply(this,arguments)}function ie(){return(ie=Object(p.a)(d.a.mark((function e(){var t,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ce(!1),t=x()(Z).format("DD-MM-YYYY"),n="district"===z?"/appointment/sessions/public/calendarByDistrict?district_id=".concat(H,"&date=").concat(t):"/appointment/sessions/public/calendarByPin?pincode=".concat(X,"&date=").concat(t),console.log("url",n),e.next=7,f.a.get(n);case 7:c=e.sent,console.log("res",c),ce(!0),_(Object(j.a)(c.data.centers)),de(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),ce(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function le(e){var t=x()(Z);t="next"===e?t.add(7,"days"):t.add(-7,"days"),$(t.format("YYYY-MM-DD"))}function oe(e){e.target.checked&&G(e.target.value)}function de(){var e=Object(j.a)(w);if(h.length){var t=(e=e.filter((function(e){return!(!h.includes("Free")||!h.includes("Paid"))||(h.includes("Free")?"Free"==e.fee_type:!h.includes("Paid")||"Paid"==e.fee_type)}))).map((function(e){var t=Object(u.a)({},e);return h.includes("Age 18+")&&h.includes("Age 45+")||(h.includes("Age 18+")?t.sessions=t.sessions.filter((function(e){return 18==e.min_age_limit})):h.includes("Age 45+")&&(t.sessions=t.sessions.filter((function(e){return 45==e.min_age_limit})))),h.includes("COVISHIELD")&&h.includes("COVAXIN")||(h.includes("COVISHIELD")?t.sessions=t.sessions.filter((function(e){return"COVISHIELD"===e.vaccine})):h.includes("COVAXIN")&&(t.sessions=t.sessions.filter((function(e){return"COVAXIN"===e.vaccine})))),t}));M(t.filter((function(e){return e.sessions.length})))}else M(e)}function ue(){return(ue=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),re();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s.a.useEffect((function(){!function(){se.apply(this,arguments)}()}),[]),s.a.useEffect((function(){!function(){ae.apply(this,arguments)}()}),[V]),s.a.useEffect((function(){re()}),[Z]),s.a.useEffect((function(){de()}),[h,w]),s.a.useEffect((function(){var t=new URLSearchParams;H&&t.append("district",H),X&&t.append("pincode",X),V&&t.append("state",V),z&&t.append("searchBy",z),h&&t.append("filters",h),e.push({search:t.toString()})}),[H,X,V,z,h]),Object(v.jsxs)("div",{className:"",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-sm-6 col-xs-12 col-sm-offset-3",children:[Object(v.jsx)("h3",{children:"COWIN - Check your nearest vaccination center"}),Object(v.jsx)("label",{children:"Developed By: Sunil More"})," ",Object(v.jsx)("a",{href:"https://github.com/sunilmore690/cowin-vaccine",target:"_blank",children:"Repo"}),Object(v.jsxs)("form",{onSubmit:function(e){return ue.apply(this,arguments)},style:{marginTop:"20px"},children:[Object(v.jsxs)("div",{class:"form-group",children:[Object(v.jsx)("input",{type:"radio",value:"pincode",checked:"pincode"===z,onChange:oe})," ","Search By Pincode",Object(v.jsx)("input",{type:"radio",value:"district",style:{marginLeft:"10px"},checked:"district"===z,onChange:oe})," ","Search By District"]}),"district"===z?Object(v.jsxs)(s.a.Fragment,{children:[Object(v.jsxs)("div",{class:"form-group",children:[Object(v.jsx)("label",{for:"email",children:"State"}),Object(v.jsxs)("select",{type:"text",class:"form-control",value:V,onChange:function(e){return B(e.target.value)},children:[Object(v.jsx)("option",{value:"",children:"--Select State--"}),a.map((function(e){return Object(v.jsx)("option",{value:e.state_id,children:e.state_name})}))]})]}),Object(v.jsxs)("div",{class:"form-group",children:[Object(v.jsx)("label",{for:"email",children:"District"}),Object(v.jsxs)("select",{type:"text",class:"form-control",value:H,onChange:function(e){return R(e.target.value)},children:[Object(v.jsx)("option",{value:"",children:"--Select District--"}),N.map((function(e){return Object(v.jsx)("option",{value:e.district_id,children:e.district_name})}))]})]})]}):Object(v.jsxs)("div",{class:"form-group",children:[Object(v.jsx)("label",{for:"email",children:"Pincode"}),Object(v.jsx)("input",{type:"text",className:"form-control",value:X,onChange:function(e){return J(e.target.value)}})]}),Object(v.jsxs)("div",{class:"form-group hide",children:[Object(v.jsx)("label",{for:"email",children:"Date"}),Object(v.jsx)("input",{type:"date",className:"form-control",value:Z,onChange:function(e){return $(e.target.value)}})]}),Object(v.jsx)("button",{type:"submit",class:"btn btn-success",children:"Search"})]})]})}),Object(v.jsx)(y,{handleFilterChange:function(e){O(e)},propfilters:h}),Object(v.jsxs)("div",{className:"row",children:[ne?Object(v.jsxs)("div",{style:{marginTop:"10px"},children:[Object(v.jsxs)("div",{children:[Object(v.jsxs)("span",{className:"btn btn-link",onClick:function(e){return le("prev")},children:[" ","Prev"]}),Object(v.jsxs)("span",{className:"btn btn-link pull-right",onClick:function(e){return le("next")},children:["Next"," "]})]}),Object(v.jsxs)("table",{class:"table table-striped",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{}),Object(j.a)(Array(7)).map((function(e,t){return Object(v.jsx)("th",{children:(n=t,x()(Z).add(n,"days").format("DD MMM YYYY"))},t);var n}))]})}),Object(v.jsx)("tbody",{children:A.map((function(e){return Object(v.jsxs)("tr",{id:"abc"+e.center_id,children:[Object(v.jsxs)("td",{style:{width:"100px"},children:[Object(v.jsxs)("b",{children:[e.name," \xa0","Free"===e.fee_type?null:Object(v.jsx)("span",{class:"label label-primary",children:"PAID"})]}),Object(v.jsx)("br",{}),e.address,",",e.block_name,",",e.district_name,",",e.state_name," -"," ",e.pincode]}),Object(j.a)(Array(7)).map((function(t,n){var c=m.a.findWhere(e.sessions,{date:x()(Z).add(n,"days").format("DD-MM-YYYY")});return c?Object(v.jsxs)("td",{children:[0==c.available_capacity?Object(v.jsx)("span",{className:"label label-danger",children:"Booked"}):Object(v.jsx)("span",{className:"label label-success",children:c.available_capacity}),Object(v.jsx)("br",{}),Object(v.jsxs)("span",{style:{colorName:"red"},children:["Age : ",c.min_age_limit,"+"]}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{style:{colorName:"darkgrey"},children:"COVISHIELD"===c.vaccine?Object(v.jsx)("span",{style:{color:"blue"},children:c.vaccine}):Object(v.jsx)("span",{style:{color:"blueviolet"},children:c.vaccine})})]},n+"session"):Object(v.jsx)("td",{children:Object(v.jsx)("span",{className:"badge",children:"NA"})},"session"+n)}))]})}))})]}),ne&&!w.length?Object(v.jsx)("center",{children:Object(v.jsx)("b",{children:"No Vaccination Center Available "})}):null]}):null," "]})]})}})})})}),S)}},[[69,1,2]]]);
//# sourceMappingURL=main.abd88da5.chunk.js.map